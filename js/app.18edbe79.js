(function(){"use strict";var t={5447:function(t,e,s){var i=s(3239),r=s(3798),a=s(6314);s(9424);class n{constructor(){(0,a.Z)(this,"storage",window.localStorage)}setItem(t,e){try{return this.storage.setItem(t,e),!0}catch(s){return!1}}getItem(t,e){try{return this.storage.getItem(t)||e}catch(s){return!1}}removeItem(t){try{return this.storage.removeItem(t),!0}catch(e){return!1}}}var o=n;class l{constructor(){(0,a.Z)(this,"COLUMN",4),(0,a.Z)(this,"LINE",4),(0,a.Z)(this,"matrix",[]),(0,a.Z)(this,"old_matrix",[]),(0,a.Z)(this,"state",{won:!1,lose:!1,ended:!1,points:0,move:0,best:0,duration:0}),(0,a.Z)(this,"storage",new o)}initGame(){this.matrix=[],this.matrix[0]=[0,0,0,0],this.matrix[1]=[0,0,0,0],this.matrix[2]=[0,0,0,0],this.matrix[3]=[0,0,0,0],this.old_matrix=this.serialize(),this._insertTile(2),this._insertTile(2),this.state.won=!1,this.state.lose=!1,this.state.ended=!1,this.state.points=0,this.state.move=0,this.state.duration=0}keyRight(){this.old_matrix=this.serialize();let t=!1,e=!1;for(let s=0;s<this.LINE;s++){let i=[0,0,0,0],r=this.COLUMN-1;for(let t=this.COLUMN-1;t>=0;t--)0!=this.matrix[s][t]&&(this.matrix[s][t]==i[r]?(i[r]+=this.matrix[s][t],this.state.points+=i[r],2048===i[r]&&(e=!0),r--):0!=i[r]?(r--,i[r]+=this.matrix[s][t]):i[r]+=this.matrix[s][t]);t||(t=this.matrix[s].some(((t,e)=>{if(t!=i[e])return!0}))),this.matrix[s]=i}return this._testEndGame(e,t)}keyLeft(){this.old_matrix=this.serialize();let t=!1,e=!1;for(let s=0;s<this.LINE;s++){let i=[0,0,0,0],r=0;for(let t=0;t<this.COLUMN;t++)0!=this.matrix[s][t]&&(this.matrix[s][t]==i[r]?(i[r]+=this.matrix[s][t],this.state.points+=i[r],2048===i[r]&&(e=!0),r++):0!=i[r]?(r++,i[r]+=this.matrix[s][t]):i[r]+=this.matrix[s][t]);t||this.matrix[s].forEach(((e,s)=>{e!=i[s]&&(t=!0)})),this.matrix[s]=i}return this._testEndGame(e,t)}keyUp(){this.old_matrix=this.serialize();let t=!1,e=!1;for(let s=0;s<this.COLUMN;s++){let i=[0,0,0,0],r=0;for(let t=0;t<this.LINE;t++)0!=this.matrix[t][s]&&(this.matrix[t][s]==i[r]?(i[r]+=this.matrix[t][s],this.state.points+=i[r],2048===i[r]&&(e=!0),r++):0!=i[r]?(r++,i[r]+=this.matrix[t][s]):i[r]+=this.matrix[t][s]);for(let e=0;e<this.LINE;e++)this.matrix[e][s]!=i[e]&&(t=!0),this.matrix[e][s]=i[e]}return this._testEndGame(e,t)}keyDown(){this.old_matrix=this.serialize();let t=!1,e=!1;for(let s=0;s<this.COLUMN;s++){let i=[0,0,0,0],r=this.LINE-1;for(let t=this.LINE-1;t>=0;t--)0!=this.matrix[t][s]&&(this.matrix[t][s]==i[r]?(i[r]+=this.matrix[t][s],this.state.points+=i[r],2048===i[r]&&(e=!0),r--):0!=i[r]?(r--,i[r]+=this.matrix[t][s]):i[r]+=this.matrix[t][s]);for(let e=this.LINE-1;e>=0;e--)this.matrix[e][s]!=i[e]&&(t=!0),this.matrix[e][s]=i[e]}return this._testEndGame(e,t)}_getRandomInt(t){return Math.floor(Math.random()*t)}_isJouable(){let t=!1;for(let e=0;e<this.LINE;e++){for(let s=0;s<this.COLUMN-1;s++)if(this.matrix[e][s]==this.matrix[e][s+1]||0==this.matrix[e][s]){t=!0;break}if(t)break}if(!t)for(let e=0;e<this.COLUMN;e++){for(let s=0;s<this.LINE-1;s++)if(this.matrix[s][e]==this.matrix[s+1][e]){t=!0;break}if(t)break}if(!t)for(let e=0;e<this.LINE;e++){for(let s=0;s<this.COLUMN;s++)if(0==this.matrix[e][s]){t=!0;break}if(t)break}return t}_insertTile(t=0){let e=!1,s=0;while(!e){let i=this._getRandomInt(this.LINE),r=this._getRandomInt(this.COLUMN);0==this.matrix[i][r]&&(this.matrix[i][r]=t||(1!=this._getRandomInt(10)?2:4),e=!0),s++,s>1e4&&(e=!0)}return!0}_won(){console.log("VICTOIRE !!!!")}_testEndGame(t,e){t?(this.move++,this.end_time=new Date,this.state.won=!0,this.state.ended=!0):e?(this.state.move++,this._insertTile(),this._isJouable()||(this.state.ended=!0,this.state.lose=!0)):this._isJouable()||(this.state.move++,this.state.ended=!0,this.state.lose=!0),this.store()}incDuration(){this.state.duration++,this.store()}undo(){this.unserialize(String(this.old_matrix))}serialize(){let t=[];for(let e=0;e<this.LINE;e++)for(let s=0;s<this.COLUMN;s++)t.push(this.matrix[e][s]);return t}unserialize(t){const e=t.split(",");let s=0;for(let i=0;i<this.LINE;i++)for(let t=0;t<this.COLUMN;t++)this.matrix[i][t]=parseInt(e[s]),s++}store(){this.storage.setItem("grid",this.serialize()),this.storage.setItem("won",this.state.won),this.storage.setItem("lose",this.state.lose),this.storage.setItem("ended",this.state.ended),this.storage.setItem("points",this.state.points),this.storage.setItem("move",this.state.move),this.state.points>this.state.best&&(this.state.best=this.state.points),this.storage.setItem("best",this.state.best),this.storage.setItem("duration",this.state.duration)}load(){const t=this.storage.getItem("grid",!1);return t?(this.unserialize(t),this.state.won="true"==this.storage.getItem("won",!1),this.state.lose="true"==this.storage.getItem("lose",!1),this.state.ended="true"==this.storage.getItem("ended",!1),this.state.points=parseInt(this.storage.getItem("points",0)),this.state.move=parseInt(this.storage.getItem("move",0)),this.state.best=parseInt(this.storage.getItem("best",0)),this.state.duration=parseInt(this.storage.getItem("duration",0)),this.state):void 0}get state(){return this.state}}var h=l;const m=(0,r.MT)({state(){return{game:new h,state_game:{},interval:null}},getters:{matrix(t){return t.game.matrix},won(t){return t.game.state.won},lose(t){return t.game.state.lose},ended(t){return t.game.state.ended},points(t){return t.game.state.points},move(t){return t.game.state.move},stateGame(t){return t.game.state},best(t){return t.game.state.best},duration(t){return t.game.state.duration}},mutations:{initGame(t){t.game.initGame(),null!=t.interval&&(clearInterval(t.interval),t.interval=null),t.interval=setInterval((()=>{t.game.incDuration()}),1e3)},newGame(t){this.commit("initGame"),t.game.store()},startGame(t){this.commit("initGame"),t.game.load()},undo(t){t.game.undo()},keyLeft(t){t.game.state.won||t.game.state.lose||(t.game.keyLeft(),console.log(t.game.state),t.game.state.ended&&(clearInterval(t.interval),t.interval=null))},keyRight(t){t.game.state.won||t.game.state.lose||(t.game.keyRight(),t.game.state.ended&&(clearInterval(t.interval),t.interval=null))},keyUp(t){t.game.state.won||t.game.state.lose||(t.game.keyUp(),t.game.state.ended&&(clearInterval(t.interval),t.interval=null))},keyDown(t){t.game.state.won||t.game.state.lose||(t.game.keyDown(),t.game.state.ended&&(clearInterval(t.interval),t.interval=null))}},actions:{}});var u=s(7349),d=s(4582);const c={style:{display:"flex"}},g=(0,u._)("div",{style:{"flex-grow":"1"}},null,-1),v={style:{display:"flex",padding:"10px"}},f={class:"ctn-goal"},w={style:{display:"flex"}},p={style:{padding:"0 10px"}},x={class:"info"},_=(0,u._)("br",null,null,-1),I={class:"info"},y=(0,u._)("br",null,null,-1),k=(0,u._)("div",{style:{"flex-grow":"1"}},null,-1),b={style:{display:"flex"}},L=(0,u._)("div",{style:{"flex-grow":"1"}},null,-1),N={class:"ctn-bottom"},O={class:"move"},E={key:0},C={class:"chrono"},U=(0,u._)("div",{style:{"flex-grow":"1"}},null,-1),D={class:"copy"};function G(t,e,s,i,r,a){const n=(0,u.up)("Objectif"),o=(0,u.up)("Matrix"),l=(0,u.up)("Win");return(0,u.wg)(),(0,u.iD)(u.HY,null,[(0,u._)("div",c,[g,(0,u._)("div",v,[(0,u._)("div",f,[(0,u.Wm)(n,{goal:2048})]),(0,u._)("div",w,[(0,u._)("div",p,[(0,u._)("div",x,[(0,u.Uk)(" SCORE"),_,(0,u.Uk)(" "+(0,d.zw)(t.$store.getters.stateGame.points),1)]),(0,u._)("div",{class:"btn-orange",onClick:e[0]||(e[0]=(...t)=>a.newGame&&a.newGame(...t))},"NEW")]),(0,u._)("div",null,[(0,u._)("div",I,[(0,u.Uk)(" BEST "),y,(0,u.Uk)(" "+(0,d.zw)(t.$store.getters.stateGame.best),1)]),(0,u._)("div",{class:"btn-orange",onClick:e[1]||(e[1]=(...t)=>a.undo&&a.undo(...t))},"UNDO")])])]),k]),(0,u._)("div",b,[L,(0,u._)("div",null,[(0,u.Wm)(o,{matrix:t.$store.getters.matrix},null,8,["matrix"]),(0,u._)("div",N,[(0,u._)("div",O,[(0,u.Uk)((0,d.zw)(t.$store.getters.move)+" move",1),t.$store.getters.move>1?((0,u.wg)(),(0,u.iD)("span",E,"s")):(0,u.kq)("",!0)]),(0,u._)("div",C,(0,d.zw)(a.chrono),1)])]),U]),(0,u.Wm)(l,{win:t.$store.getters.won,lose:t.$store.getters.lose},null,8,["win","lose"]),(0,u._)("div",D,"v"+(0,d.zw)(a.version)+" © 2022-2023 - By Nodon et Zorglu",1)],64)}const M={class:"matrix"};function $(t,e,s,i,r,a){const n=(0,u.up)("cell");return(0,u.wg)(),(0,u.iD)("div",M,[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)(s.matrix,((t,e)=>((0,u.wg)(),(0,u.iD)("div",{key:e,class:"line"},[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)(t,((t,e)=>((0,u.wg)(),(0,u.iD)("div",{key:e,class:"cell"},[(0,u.Wm)(n,{value:t},null,8,["value"])])))),128))])))),128))])}const z={key:0},Z={key:1};function R(t,e,s,i,r,a){return(0,u.wg)(),(0,u.iD)("div",{class:(0,d.C_)(["cell cell-inner",a.getColor])},[s.value>0?((0,u.wg)(),(0,u.iD)("div",z,(0,d.zw)(s.value),1)):((0,u.wg)(),(0,u.iD)("div",Z,"   "))],2)}var j={name:"CelL",props:{value:Number},computed:{getColor(){return"cell-"+this.value}}},T=s(2853);const W=(0,T.Z)(j,[["render",R],["__scopeId","data-v-335eaca7"]]);var A=W,S={name:"MatriX",props:{matrix:Array},components:{Cell:A}};const Y=(0,T.Z)(S,[["render",$],["__scopeId","data-v-3639b482"]]);var B=Y;const F={key:0,class:"inner"},H={key:1,class:"inner"};function J(t,e,s,r,a,n){return(0,u.wy)(((0,u.wg)(),(0,u.iD)("div",{class:"win",onClick:e[0]||(e[0]=(...t)=>n.winClick&&n.winClick(...t))},[s.win?((0,u.wg)(),(0,u.iD)("div",F,"YOU WIN !!!")):((0,u.wg)(),(0,u.iD)("div",H,"YOU LOSE !!!"))],512)),[[i.F8,n.show]])}var K={name:"WiN",props:{win:Boolean,lose:Boolean},data(){return{showing:!1}},watch:{win:function(){this.showing=this.win||this.lose},lose:function(){this.showing=this.win||this.lose}},computed:{show(){return this.showing}},methods:{winClick(){this.showing=!1}}};const P=(0,T.Z)(K,[["render",J],["__scopeId","data-v-11a54718"]]);var q=P;const V={class:"objectif"};function X(t,e,s,i,r,a){return(0,u.wg)(),(0,u.iD)("div",V,(0,d.zw)(s.goal),1)}var Q={name:"ObjectiF",props:{goal:Number}};const tt=(0,T.Z)(Q,[["render",X],["__scopeId","data-v-12f82cc0"]]);var et=tt,st={name:"App",components:{Matrix:B,Win:q,Objectif:et},computed:{chrono(){let t=this.$store.getters.duration;const e=parseInt(t/3600);t-=3600*e;const s=parseInt(t/60);t-=60*s;const i=t;let r="";return e>0?(r=`${e}h`,r+=`${s}m`):s>0&&(r+=`${s}m`),r+=`${i}s`,r},version(){return"0.1.1"}},methods:{newGame(){this.$store.commit("newGame")},undo(){this.$store.commit("undo")}},unmounted(){window.removeEventListener("keydown",(()=>{}))},mounted(){this.$store.commit("startGame"),window.addEventListener("keydown",(t=>{"ArrowLeft"==t.key?this.$store.commit("keyLeft"):"ArrowRight"==t.key?this.$store.commit("keyRight"):"ArrowUp"==t.key?this.$store.commit("keyUp"):"ArrowDown"==t.key&&this.$store.commit("keyDown")}))}};const it=(0,T.Z)(st,[["render",G]]);var rt=it;(0,i.ri)(rt).use(m).mount("#app")}},e={};function s(i){var r=e[i];if(void 0!==r)return r.exports;var a=e[i]={exports:{}};return t[i](a,a.exports,s),a.exports}s.m=t,function(){var t=[];s.O=function(e,i,r,a){if(!i){var n=1/0;for(m=0;m<t.length;m++){i=t[m][0],r=t[m][1],a=t[m][2];for(var o=!0,l=0;l<i.length;l++)(!1&a||n>=a)&&Object.keys(s.O).every((function(t){return s.O[t](i[l])}))?i.splice(l--,1):(o=!1,a<n&&(n=a));if(o){t.splice(m--,1);var h=r();void 0!==h&&(e=h)}}return e}a=a||0;for(var m=t.length;m>0&&t[m-1][2]>a;m--)t[m]=t[m-1];t[m]=[i,r,a]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,i){var r,a,n=i[0],o=i[1],l=i[2],h=0;if(n.some((function(e){return 0!==t[e]}))){for(r in o)s.o(o,r)&&(s.m[r]=o[r]);if(l)var m=l(s)}for(e&&e(i);h<n.length;h++)a=n[h],s.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return s.O(m)},i=self["webpackChunk_2048"]=self["webpackChunk_2048"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(5447)}));i=s.O(i)})();